services:
  - type: web
    name: luminaiq-pdf-service
    runtime: python
    buildCommand: pip install -r requirements.txt && mkdir -p static
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: PYTHON_VERSION
        value: "3.11"
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_SERVICE_KEY
        sync: false
      - key: MAIN_API_WEBHOOK_URL
        value: http://localhost:8000/api/v1/webhook/document-ready
      - key: MAIN_API_WEBHOOK_SECRET
        value: supersecretwebhook
      - key: ENVIRONMENT
        value: production
      - key: CHUNK_SIZE
        value: "500"
      - key: CHUNK_OVERLAP
        value: "50"
      - key: MAX_FILE_SIZE
        value: "10485760"
      - key: BACKEND_CORS_ORIGINS
        value: '["https://luminaiq-1.onrender.com","http://localhost:5173","http://localhost:3000"]'
    healthCheckPath: /health
